<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>git 常用命令备忘录 - zhimoe</title>
<meta property="og:title" content="git 常用命令备忘录 - zhimoe"><meta name=twitter:card content="summary"><meta property="description" content="记录日常开发中偶尔会遇到的但是总是记不住的 git 命令。
以下技巧都来自于oh shit git 和 stackoverflow，版权归作者所有。"><meta property="og:description" content="记录日常开发中偶尔会遇到的但是总是记不住的 git 命令。
以下技巧都来自于oh shit git 和 stackoverflow，版权归作者所有。"><link rel=stylesheet href=https://zhimoe.github.io/css/style.css><link rel=stylesheet href=https://zhimoe.github.io/css/fonts.css><link rel=stylesheet href=https://zhimoe.github.io/css/custom.css><link rel=stylesheet href=https://indestructibletype.com/fonts/Jost.css></head><body class="single post"><div class=crop-h></div><div class=crop-v></div><div class=crop-c></div><nav class="nav-top small"><div class=logo><a href=https://zhimoe.github.io/>新街记事</a></div><div class=menu><span class=active><a href=https://zhimoe.github.io/post/>博客</a></span>
<span><a href=https://zhimoe.github.io/categories/%E7%BC%96%E7%A8%8B/>编程</a></span>
<span><a href=https://zhimoe.github.io/categories/%E7%BF%BB%E8%AF%91/>翻译</a></span>
<span><a href=https://zhimoe.github.io/categories/%E9%9A%8F%E6%83%B3/>随想</a></span>
<span><a href=https://zhimoe.github.io/search/>搜索</a></span></div></nav><div class=article-meta><h1 class=title>git 常用命令备忘录</h1><h3 class=meta-line><span><span class=date>2019-09-01</span>
</span><span class=term><a href=https://zhimoe.github.io/categories/%E7%BC%96%E7%A8%8B/ class=term-cat>编程</a>
<a href=https://zhimoe.github.io/tags/git/ class=term-tag>#git </a><a href=https://zhimoe.github.io/tags/code/ class=term-tag>#code</a></span></h3></div><div class=main><nav id=TableOfContents><ul><li><a href=#delete-all-history-commit-and-commit-current-content>delete all history commit and commit current content</a></li><li><a href=#store-password-in-local>store password in local</a></li><li><a href=#git-reflog>git reflog</a></li><li><a href=#git-commit---amend>git commit &ndash;amend</a></li><li><a href=#undo-a-commit>undo a commit</a></li><li><a href=#undo-a-files-changes>undo a file&rsquo;s changes</a></li><li><a href=#git-stash>git stash</a></li><li><a href=#git-rebase>git rebase</a></li><li><a href=#git-pull-request>git pull request</a></li><li><a href=#git-cherry-pick>git cherry-pick</a></li><li><a href=#commit-change-in-submodule>commit change in submodule</a></li></ul></nav><p>记录日常开发中偶尔会遇到的但是总是记不住的 git 命令。<br>以下技巧都来自于<a href=https://ohshitgit.com/>oh shit git</a> 和 <a href=https://stackoverflow.com>stackoverflow</a>，版权归作者所有。</p><h2 id=delete-all-history-commit-and-commit-current-content>delete all history commit and commit current content</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git checkout --orphan tmp_branch <span style=color:#000>&amp;&amp;</span> git add -A <span style=color:#000>&amp;&amp;</span> git commit -am <span style=color:#c41a16>&#34;first commit&#34;</span> <span style=color:#000>&amp;&amp;</span> git branch -D master <span style=color:#000>&amp;&amp;</span> git branch -m master <span style=color:#000>&amp;&amp;</span> git push -f origin master
</span></span></code></pre></div><h2 id=store-password-in-local>store password in local</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git config credential.helper store
</span></span></code></pre></div><h2 id=git-reflog>git reflog</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git reflog
</span></span><span style=display:flex><span><span style=color:#177500># you will see a list of every thing you&#39;ve</span>
</span></span><span style=display:flex><span><span style=color:#177500># done in git, across all branches!</span>
</span></span><span style=display:flex><span><span style=color:#177500># each one has an index HEAD@{index}</span>
</span></span><span style=display:flex><span><span style=color:#177500># find the one before you broke everything</span>
</span></span><span style=display:flex><span>git reset HEAD@<span style=color:#000>{</span>index<span style=color:#000>}</span>
</span></span><span style=display:flex><span><span style=color:#177500># magic time machine</span>
</span></span></code></pre></div><h2 id=git-commit---amend>git commit &ndash;amend</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#177500># make your change</span>
</span></span><span style=display:flex><span>git add . <span style=color:#177500># or add individual files</span>
</span></span><span style=display:flex><span>git commit --amend --no-edit
</span></span><span style=display:flex><span><span style=color:#177500># now your last commit contains that change!</span>
</span></span><span style=display:flex><span><span style=color:#177500># WARNING: never amend public(remote) commits!!!</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># I need to change the message on my last commit!</span>
</span></span><span style=display:flex><span>git commit --amend 
</span></span><span style=display:flex><span><span style=color:#177500># follow prompts to change the commit message</span>
</span></span></code></pre></div><h2 id=undo-a-commit>undo a commit</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#177500># Oh shit, I need to undo a commit from like 5 commits ago!</span>
</span></span><span style=display:flex><span><span style=color:#177500># find the commit you need to undo</span>
</span></span><span style=display:flex><span>git log
</span></span><span style=display:flex><span><span style=color:#177500># use the arrow keys to scroll up and down in history</span>
</span></span><span style=display:flex><span><span style=color:#177500># once you&#39;ve found your commit, save the hash</span>
</span></span><span style=display:flex><span>git revert <span style=color:#000>[</span>saved hash<span style=color:#000>]</span>
</span></span><span style=display:flex><span><span style=color:#177500># git will create a new commit that undoes that commit</span>
</span></span><span style=display:flex><span><span style=color:#177500># follow prompts to edit the commit message</span>
</span></span><span style=display:flex><span><span style=color:#177500># or just save and commit</span>
</span></span></code></pre></div><h2 id=undo-a-files-changes>undo a file&rsquo;s changes</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#177500># find a hash for a commit before the file was changed</span>
</span></span><span style=display:flex><span>git log
</span></span><span style=display:flex><span><span style=color:#177500># use the arrow keys to scroll up and down in history</span>
</span></span><span style=display:flex><span><span style=color:#177500># once you&#39;ve found your commit, save the hash</span>
</span></span><span style=display:flex><span>git checkout <span style=color:#000>[</span>saved hash<span style=color:#000>]</span> -- path/to/file
</span></span><span style=display:flex><span><span style=color:#177500># the old version of the file will be in your index</span>
</span></span><span style=display:flex><span>git commit -m <span style=color:#c41a16>&#34;Wow, you don&#39;t have to copy-paste to undo&#34;</span>
</span></span></code></pre></div><h2 id=git-stash>git stash</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#177500># 如果临时想要将代码恢复到最近一次commit 帮助同事复现他的问题</span>
</span></span><span style=display:flex><span><span style=color:#177500># 使用git stash 暂存当前修改，这个不是stage，也不是commit</span>
</span></span><span style=display:flex><span>git stash
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 显示当前暂存历史</span>
</span></span><span style=display:flex><span>git stash list
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 找回暂存</span>
</span></span><span style=display:flex><span>git stash apply
</span></span><span style=display:flex><span><span style=color:#177500># or spec which stash </span>
</span></span><span style=display:flex><span>git stash apply stash@<span style=color:#000>{</span>1<span style=color:#000>}</span>
</span></span></code></pre></div><h2 id=git-rebase>git rebase</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git pull --rebase
</span></span></code></pre></div><h2 id=git-pull-request>git pull request</h2><h2 id=git-cherry-pick>git cherry-pick</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#177500># switch to main branch</span>
</span></span><span style=display:flex><span>git chekcout main
</span></span><span style=display:flex><span><span style=color:#177500># pick on commit from other branch</span>
</span></span><span style=display:flex><span>git cherry-pick f
</span></span></code></pre></div><h2 id=commit-change-in-submodule>commit change in submodule</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#177500># submodule is a independent repo,</span>
</span></span><span style=display:flex><span><span style=color:#177500># so you need commit/push change in submodule first and then </span>
</span></span><span style=display:flex><span><span style=color:#177500># update(commit) the main project to refer the new commit of submodule </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># step 1</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>cd</span> path/to/submodule
</span></span><span style=display:flex><span>git add &lt;stuff&gt;
</span></span><span style=display:flex><span>git commit -m <span style=color:#c41a16>&#34;comment&#34;</span>
</span></span><span style=display:flex><span>git push
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># step 2</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>cd</span> /main/project
</span></span><span style=display:flex><span>git add path/to/submodule
</span></span><span style=display:flex><span>git commit -m <span style=color:#c41a16>&#34;updated my submodule&#34;</span>
</span></span><span style=display:flex><span>git push
</span></span></code></pre></div><nav class="post-nav fullwidth"><span>&larr; <a href=https://zhimoe.github.io/post/rust-packages-crates-mod/>Rust Packages Crates Mod Notes</a></span>
<span><a href=https://zhimoe.github.io/post/devops-maturity-model-checklist/>DevOps 能力成熟度模型</a> &rarr;</span></nav></div><footer class=small><script src=//cdn.jsdelivr.net/npm/@xiee/utils/js/fix-toc.min.js defer></script><link rel=stylesheet href=//cdn.jsdelivr.net/gh/rstudio/markdown/inst/resources/prism-xcode.css><script src=//cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js defer></script><script src=//cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js defer></script><script src=//cdn.jsdelivr.net/npm/@xiee/utils/js/copy-button.min.js defer></script><link rel=stylesheet href=//cdn.jsdelivr.net/npm/@xiee/utils/css/copy-button.min.css><script src=//cdn.jsdelivr.net/npm/@xiee/utils/js/heading-anchor.min.js defer></script><script src=//cdn.jsdelivr.net/npm/@xiee/utils/js/external-link.min.js defer></script><script src=//cdn.jsdelivr.net/npm/@xiee/utils/js/fullwidth.min.js defer></script><hr><p class=nav-bottom><span><a href=https://zhi.moe>ZhiMoe</a> © 2024</span>
<span class=menu-bottom><a href=https://zhimoe.github.io/categories/>Categories</a> <a href=https://zhimoe.github.io/tags/>Tags</a>
<a href=https://zhimoe.github.io/post/index.xml type=application/rss+xml title="RSS feed">Subscribe</a>
<a href=#>Back to Top</a></span></p></footer></body></html>