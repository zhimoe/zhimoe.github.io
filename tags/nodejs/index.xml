<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>nodejs on 香取海</title><link>https://zhimoe.github.io/tags/nodejs/</link><description>Recent content in nodejs on 香取海</description><generator>Hugo -- gohugo.io</generator><language>zh</language><lastBuildDate>Sun, 22 Aug 2021 21:55:06 +0800</lastBuildDate><atom:link href="https://zhimoe.github.io/tags/nodejs/index.xml" rel="self" type="application/rss+xml"/><item><title>在 Githook 中调用 Nodejs 脚本</title><link>https://zhimoe.github.io/post/nodejs-as-githook/</link><pubDate>Sun, 22 Aug 2021 21:55:06 +0800</pubDate><guid>https://zhimoe.github.io/post/nodejs-as-githook/</guid><description>&lt;p>如何在 githook 中调用 nodejs 脚本。主要踩坑在于不知道如何在 bash 中获取 node 脚本返回值，搜了好大一圈。&lt;/p>
&lt;h2 id="背景">背景&lt;/h2>
&lt;p>微服务模式开发中，每个小组维护自己的应用，通过一个 nginx 入口反向代理所有的子应用，向用户开放一个站点.nginx 应用中需要维护各个子应用的代理，即 ng.conf 中的 location.&lt;br>
此外，一个应用需要配置 DEV,ST,UAT,PRD 四个环境的 location.目前的做法是 www/ngconf/目录下面分为 dev、st、uat、prd 四个文件夹，在文件夹内部每个小组各自维护一个 conf 文件。&lt;br>
每增加一个应用，需要在四个文件夹中自己小组的配置文件添加配置。随着应用越来越多，以及人员流动，会发生不同文件配置相同的 location entry.&lt;br>
例如 A 应用上线一个功能需要依赖 B 应用，但是新人不知道 B 已经配置过了，所以又重复添加了一个，导致启动报错。&lt;/p></description></item></channel></rss>